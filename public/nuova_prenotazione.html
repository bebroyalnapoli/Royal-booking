<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Nuova Prenotazione - Royal Booking</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

  <!-- JS -->
  <script src="firebase.js"></script>
  <script src="auth.js"></script>
  <script src="sidebar.js"></script>
  <script src="stanze.js"></script>
  <script src="prenotazioni.js"></script>
</head>

<body>

  <!-- SIDEBAR -->
  <div id="sidebar-container"></div>

  <!-- HEADER APP -->
  <header class="app-header">
    <button id="headerMenuToggle" class="header-menu-btn">‚ò∞</button>

    <div class="header-titles">
      <h1>ROYAL BOOKING</h1>
      <span id="nomeStrutturaHeader" class="subtitle"></span>
    </div>
  </header>

  <!-- CONTENUTO -->
  <main class="page-content">

    <div class="page-top-actions">
      <button class="secondary" onclick="window.location.href='prenotazioni.html'">
        ‚¨Ö Torna alle prenotazioni
      </button>
    </div>

    <div id="noStruttura" class="warning hidden">
      ‚ö†Ô∏è Seleziona prima una struttura dal menu
    </div>

    <section id="prenotazioneForm" class="card hidden">

      <h2>Nuova prenotazione</h2>

      <!-- ANTEPRIMA CODICE -->
      <div class="codice-box">
        Codice prenotazione:
        <strong id="codicePreview">--</strong>
      </div>

      <div class="form-grid">

        <input id="pCliente" type="text" placeholder="Nome cliente" required>

        <input id="pTelefono" type="text" placeholder="Telefono cliente" required>

      </div>

      <div class="date-grid">
        <div>
          <label>Check-in</label>
          <input id="pCheckin" type="date" required>
        </div>

        <div>
          <label>Check-out</label>
          <input id="pCheckout" type="date" required>
        </div>
      </div>

      <h3>Seleziona stanze</h3>

      <div id="stanzePrenotazione" class="stanze-box">
        <!-- popolato da JS -->
      </div>

      <div class="form-grid">
        <input
          id="pAcconto"
          type="number"
          placeholder="Acconto ‚Ç¨"
          oninput="calcolaTotali()"
        >
      </div>

      <div class="totali">
        <p>Totale: <span id="totalePrenotazione">0</span> ‚Ç¨</p>
        <p>Resta da pagare: <span id="restoDaPagare">0</span> ‚Ç¨</p>
      </div>

      <button onclick="addPrenotazione()">
        üíæ Salva prenotazione
      </button>

    </section>

  </main>

  <script>
    checkAuth();

    loadSidebar(() => {

      const nome = localStorage.getItem("nomeStrutturaAttiva");
      if (nome) {
        document.getElementById("nomeStrutturaHeader").innerText = nome;
      }

      loadNuovaPrenotazionePage();
    });
  </script>

</body>
</html>