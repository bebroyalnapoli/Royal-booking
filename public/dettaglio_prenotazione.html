<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Dettaglio Prenotazione - Royal Booking</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

  <!-- Libreria PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- JS APP -->
  <script src="firebase.js"></script>
  <script src="auth.js"></script>
  <script src="sidebar.js"></script>
  <script src="prenotazioni.js"></script>
</head>

<body>

  <!-- SIDEBAR -->
  <div id="sidebar-container"></div>

  <!-- HEADER APP -->
  <header class="app-header">
    <button id="headerMenuToggle" class="header-menu-btn">‚ò∞</button>

    <div class="header-titles">
      <h1>ROYAL BOOKING</h1>
      <span id="nomeStrutturaHeader" class="subtitle"></span>
    </div>
  </header>

  <!-- CONTENUTO -->
  <main class="page-content">

    <div class="page-top-actions">
      <button class="secondary" onclick="window.location.href='prenotazioni.html'">
        ‚¨Ö Torna alle prenotazioni
      </button>
    </div>

    <section class="card">

      <h2>
        Dettaglio prenotazione  
        <small>(Codice: <span id="dCodice">--</span>)</small>
      </h2>

      <div class="form-grid">

        <div class="form-group">
          <label>Cliente</label>
          <input id="dCliente" type="text" disabled>
        </div>

        <div class="form-group">
          <label>Telefono</label>
          <input id="dTelefono" type="text" disabled>
        </div>

      </div>

      <div class="date-grid">

        <div class="form-group">
          <label>Check-in</label>
          <input id="dCheckin" type="date" disabled>
        </div>

        <div class="form-group">
          <label>Check-out</label>
          <input id="dCheckout" type="date" disabled>
        </div>

      </div>

      <hr>

      <div class="totali">
        <p>Totale: <strong><span id="dTotale">0</span> ‚Ç¨</strong></p>
        <p>Acconto: <strong><span id="dAcconto">0</span> ‚Ç¨</strong></p>
        <p>Resto da pagare: <strong><span id="dResto">0</span> ‚Ç¨</strong></p>
      </div>

      <hr>

      <!-- PULSANTI NORMALI -->
      <div id="pulsantiNormali" class="button-row">
        <button onclick="abilitaModifica()">‚úèÔ∏è Modifica</button>
        <button onclick="generaPDFPrenotazione()">üìÑ Scarica PDF</button>
        <button onclick="eliminaPrenotazione()" class="danger">üóë Elimina</button>
      </div>

      <!-- PULSANTI IN MODIFICA -->
      <div id="pulsantiModifica" class="hidden button-row">
        <button onclick="salvaModifichePrenotazione()">üíæ Salva modifiche</button>
        <button onclick="annullaModifica()" class="secondary">‚ùå Annulla</button>
      </div>

    </section>

  </main>

  <script>
    checkAuth();

    loadSidebar(() => {

      const nome = localStorage.getItem("nomeStrutturaAttiva");
      if (nome) {
        document.getElementById("nomeStrutturaHeader").innerText = nome;
      }

      loadDettaglioPrenotazione();
    });
  </script>

</body>
</html>